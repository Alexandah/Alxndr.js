<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Panopticon Proxy</title>
  </head>

  <body>
    <script src="./Alxndr.js"></script>
    <script>
      class SpazzyText extends AlxNode {
        constructor(text, interval = 100) {
          super(p(text));
          this.info = {
            textInfo: {
              text: text,
            },
            interval: interval,
          };
          this.render = () => {
            this.domNode.textContent = this.info.textInfo.text;
          };
          setInterval(() => {
            this.spazText();
          }, this.info.interval);
        }

        spazText() {
          this.info.textInfo.text = this.info.textInfo.text
            .split("")
            .reverse()
            .join("");
        }
      }

      class AwesomeDiv extends AlxNode {
        constructor(color0, color1, children = [], interval = 100) {
          super(div(children));
          this.color0 = color0;
          this.color1 = color1;
          this.activeColor = this.color0;
          this.render = () => {
            this.domNode.style = { border: "3px solid " + this.activeColor };
          };
          setInterval(() => {
            this.switchColor();
          }, interval);
        }

        switchColor() {
          if (this.activeColor == this.color0) this.activeColor = this.color1;
          else this.activeColor = this.color0;
        }
      }

      class Yeeter extends AlxNode {
        constructor(initialText, child) {
          super(div([p(initialText), child]));
          this.render = () => {
            this.domNode.textContent = child.message;
          };
        }
      }

      class AlxButton extends AlxNode {
        constructor(text) {
          super(
            button(
              {
                onclick: () => {
                  this.clicked = true;
                  this.message =
                    this.message.slice(0, 1) + "E" + this.message.slice(1);
                },
              },
              text
            )
          );
          this.render = () => {
            this.domNode.textContent = this.message;
          };
          this.clicked = false;
          this.message = "YEET!";
        }
      }

      var button = new AlxButton("click to make shit happen");
      var yeeter = new Yeeter("i am stupid", button);
      yeeter.dependsOn(button);

      alxndrDOM([
        new AwesomeDiv("red", "blue", new SpazzyText("Alxndr.js")),
        div("kek"),
        div("kek"),
        div("kek"),
        div("kek"),
        div("kek"),
        button,
        yeeter,
      ]);
    </script>
  </body>
</html>
